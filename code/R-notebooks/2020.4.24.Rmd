---
title: Accessing midway files on Linux and MacOS
author: Sumeed Manzoor<br>[Chang Lab](https://changlab.uchicago.edu/) at the University of Chicago
date: April 24, 2020, *updated `r format(Sys.Date(), '%d %b, %Y')`*
output: 
  html_document:
    theme: sandstone
    highlight: textmate
    code_folding: "show"
    toc: true
    toc_float:
        collapsed: true
    toc_depth: 3
    includes:
        after_body: footer.html
---

<a href="http://yoyomanzoor.github.io/Chang-Lab-Notebook/" class="fa fa-home"></a>

<a href="https://changlab.uchicago.edu/" alt="The Chang Lab at the University of Chicago"><img src="https://img.shields.io/badge/%E2%80%8F%E2%80%8F%E2%80%8E-Chang%20Lab-blue?style=flat-square&logo=jekyll" /></a>
<a href="https://github.com/Yoyomanzoor/MouseTrapper" alt="Github Repo"><img src="https://img.shields.io/badge/%E2%80%8F%E2%80%8F%E2%80%8E-github%20repo-blueviolet?style=flat-square&logo=github" /></a>
<a href="" alt="tag"><img src="https://img.shields.io/badge/tags-programming%20|%20notes%20|%20tutorial%20|%20rmarkdown%20|%20RCCMidway-lightgrey?style=flat-square" /></a>

Some quick notes on how to mount Midway files on Linux and MacOS distributions.

## Install prereqs

First, we'll need to install `sshfs` (secure shell filesystem).

Linux

```bash
sudo apt-get upgrade
sudo apt-get install sshfs
```

MacOS

```bash
brew install sshfs
```

## Mount

To mount a folder from Midway (here I'll mount `/project2/ebchang/Yoyo` locally at `~/Midway`, in both Linux and MacOS use these commands

Make directory (if it doesn't exist).

```bash
mkdir ~/Midway
```

Mount files to midway

```bash
sshfs smanzoor@midway.rcc.uchicago.edu:/project2/ebchang/Yoyo ~/Midway
```

Then log into midway via 2FA.

## Test

The files should be mounted! You can test by opening a new shell, log into midway, and see if files dropped locally will upload to Midway via the following commands.

Local shell

```bash
cd ~/Midway
touch test.txt
```

New shell

```bash
ssh smanzoor@midway.rcc.uchicago.edu
cd /project2/ebchang/Yoyo
ls test.txt
```

## Unmount

```bash
umount ~/Midway
```

If that does not work, you might need to force an unmount using

```bash
umount -l ~/Midway
```

## Session Info

```{r, echo=FALSE}
sessionInfo()
```

